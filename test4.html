<html>
    <script>
        function showData(records) {
            for(let i =0; i<records.length;i++)
            {
                let tr = document.createElement("tr")
                let tdName = document.createElement("td")
                let tdEmail = document.createElement("td")
                if(i == 0)
                {
                tdName.innerHTML = records[i].name
                tdEmail.innerHTML = records[i].email
                tr.appendChild(tdName)
                tr.appendChild(tdEmail)
                table.appendChild(tr)
                }
            }
        }
        function done(response) {
          let datapromise = response.json()
            datapromise.then(showData)
        }


        // the fetch function returns a promise
        // the promise is an object that has a then method
        // the then method takes one functions as a parameter
        // the function is called when the promise is resolved
        // the function is called with the data returned from the server
        // the data is passed as a parameter to the function

        function getData() {
            let promiseRef = fetch("http://jsonplaceholder.typicode.com/comments")
            promiseRef.then(done)
            
        }
    </script>

    <input type="button" value="get data" onclick="getData()"/>
    <table id="table">
        <td> name </td>
        <td>email </td>
    </table>
</html>