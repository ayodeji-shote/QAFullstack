<html>
<script>
        let employee = 
        [{
            empno:141,
            name: "John",
            department: "HR",
            salary: 10000
        },
        {
            empno:143,
            name: "Mark",
            department: "Sales",
            salary: 15000
        },
        {
            empno:144,
            name: "Beth",
            department: "HR",
            salary: 90000
        },
        {
            empno:131,
            name: "Rodger",
            department: "Engineering",
            salary: 30000
        },
        {
            empno:142,
            name: "Smith",
            department: "IT",
            salary: 20000
        }]
        function tax(salary){
            if(salary>10000||salary<20000){
                return salary*0.15;
            }
            else if(salary>20000||salary<30000){
                return salary*0.21;
            }
            else if (salary<1000){
                return salary;
            }
        }
        function showarraydata(choice1){
            if(choice1==undefined){
                choice1 = employee;
            }
            let table1 = document.getElementById("tb1");
            table1.innerHTML = `<tr>
<td>Number</td>
<td>Employee</td>
<td>Name</td>
<td>Salary</td>
<td>Tax</td>
<td>Net</td>
<td>Department</td>
<td>Operations</td>
</tr>`;
            for(let i=0;i<choice1.length;i++){
                let tr = document.createElement("tr");
                    let td1 = document.createElement("td");
                    let td2 = document.createElement("td");
                    let td3 = document.createElement("td");
                    let td4 = document.createElement("td");
                    let td5 = document.createElement("td");
                    let td6 = document.createElement("td");
                    let td7 = document.createElement("td");
                    let btn = document.createElement("button");
                    btn.innerHTML = "Delete";
                    btn.onclick = function(){
                        let choice = confirm("Are you sure you want to delete this record?");
                        choice1.splice(i,1);
                        showarraydata();
                        console.log(choice1);
                    }
                    let btn2 = document.createElement("button");
                    btn2.innerHTML = "Edit";
                    td1.innerHTML = i+1;
                    td2.innerHTML = choice1[i].empno;
                    td3.innerHTML = choice1[i].name;
                    td4.innerHTML = choice1[i].salary;
                    td5.innerHTML = tax(choice1[i].salary);
                    td6.innerHTML = choice1[i].salary-tax(choice1[i].salary);
                    td7.innerHTML = choice1[i].department;
                    let namech = null;
                    let salarych = null;
                    let taxch = null;
                    let netch = null;
                    let departmentch = null;
                    let val1 =td3.innerHTML 
                    let val2 = td4.innerHTML 
                    let val3 = td5.innerHTML 
                    let val4 = td6.innerHTML 
                    let val5 = td7.innerHTML 
                    btn2.onclick = function(){
                        let choice = confirm("Are you sure you want to edit this record?");
                        if(choice){
                             namech = prompt("Enter new name");
                             salarych = prompt("Enter new salary");
                             taxch = tax(td4.innerHTML);
                              netch = td4.innerHTML-tax(td4.innerHTML);
                             departmentch = prompt("Enter new department");
                            
                            //btn2.type="Button"
                           // btn2.value="Edit"
                           // btn2.onclick=function(){
                              //editRecord(td3,td5,td7,i)
                            //}
                        }
                        btn2.innerHTML = "save";
                        btn2.onclick = function(){
                        let save = confirm("Do you want to save changes?");
                                if(save)
                                {
                                    td3.innerHTML = namech;
                                    td4.innerHTML = salarych;
                                    td5.innerHTML = taxch;
                                    td6.innerHTML = netch;
                                    td7.innerHTML = departmentch;
                                    btn2.innerHTML = "Edit";
                                }
                                if (!save )
                                {
                                    td3.innerHTML = val1;
                                    td4.innerHTML = val2;
                                    td5.innerHTML = val3;
                                    td6.innerHTML = val4;
                                    td7.innerHTML = val5;
                                    
                                }
                                btn2.innerHTML = "Edit";
                            }
                    }

 
                    tr.appendChild(td1);
                    tr.appendChild(td2);
                    tr.appendChild(td3);
                    tr.appendChild(td4);
                    tr.appendChild(td5);
                    tr.appendChild(td6);
                    tr.appendChild(td7);
                    tr.appendChild(btn);
                    tr.appendChild(btn2);
                    tb1.appendChild(tr);
 
            }
        }
        function editRecord(tdaname,tdsalary,tddepart,index){
            tdname.innerHTML = "<input value=" + employee[index].name+">"
            tdsalary.innerHTML = "<input value=" + employee[index].salary+">"
            tddepart.innerHTML = "<input value=" + employee[index].department+">"
        }
        function addRecord(){
            inputform.style.visibility = "hidden"
            let emp= {
                empno:document.getElementById("txt1").value,
                name:document.getElementById("txt2").value,
                salary:document.getElementById("txt3").value,
                department:document.getElementById("txt4").value
            }
            employee.push(emp);
            arraychooser();
        }
        function showinputform(){
            inputform.style.visibility = "visible";
 
        }
 
        function arraychooser(choice)
        {
            if (choice == undefined)
            {
                showarraydata(employee);
            }
            else
            {
                finachoice = [];
                for(let i=0;i<employee.length;i++)
                {
                if(employee[i].department==choice)
                {
                        finachoice.push(employee[i]);
                }
            }
                console.log(finachoice);
                showarraydata(finachoice);
            }
        }
 
        
</script>
<body onload="showarraydata()">
</body>
<br>
<input type="button" value="Show Array Data" onclick="arraychooser()">
<br>
<input type="button" value="show form " onclick="showinputform()">
<br>
<span id ="inputform" style="visibility:hidden">
        Employee:<input type="text" id="txt1" placeholder="Enter Employee Number"> <br>
        Name:<input type="text" id="txt2" placeholder="Enter Employee Name"> <br>
        Salary<input type="number" id="txt3" placeholder="Enter Employee Salary"><br>
        Department<input type="text" id="txt4" placeholder="Enter Employee Department"><br>
        Operations<input type="text" id="txt4" ><br>
<input type="button" value="Submit" onclick="addRecord()"><br>
</span>
<input list="Departments" name="Departments" id="dp" >
<datalist id="Departments">
<option value="HR" >
<option value="Sales">
<option value="Engineering">
<option value="IT">
</datalist>
<input type="submit" onclick="arraychooser(dp.value)">
 
    <table id ="tb1" border="1" style="width: 1000px;position: absolute;"> 
<tr>
<td>Number</td>
<td>Employee</td>
<td>Name</td>
<td>Salary</td>
<td>Tax</td>
<td>Net</td>
<td>Department</td>
<td>Operations</td>
</tr>
</table>
</html>